<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
</head>
<body>

<div class="box">

<h1><%= title %></h1>

<!-- Flash Message Display -->
<% if (messages && Array.isArray(messages) && messages.length > 0) { %>
    <div class="flash-messages">
        <% messages.forEach(function(msg) { %>
            <p><%= msg %></p>
        <% }) %>
    </div>
<% } %>

<!-- Error Messages Display -->
<% if (errors) { %>
  <ul class="notice">
    <% errors.forEach(error => { %>  <!-- Check the structure of 'errors' passed to the view -->
      <li><%= error.msg %></li>
    <% }) %>
  </ul>
<% } %>

<!-- Registration Form -->
<form action="/account/register" method="POST">
    <!-- First Name Input Field -->
    <label for="account_firstname">First Name:</label>
    <input 
      type="text" 
      id="account_firstname" 
      name="account_firstname" 
      value="<%= oldInput.account_firstname || '' %>" 
      required 
    >
    
    <!-- Last Name Input Field -->
    <label for="account_lastname">Last Name:</label>
    <input 
      type="text" 
      id="account_lastname" 
      name="account_lastname" 
      value="<%= oldInput.account_lastname || '' %>" 
      required 
    >
  
    <!-- Email Input Field -->
    <label for="account_email">Email:</label>
    <input 
      type="email" 
      id="account_email" 
      name="account_email" 
      value="<%= oldInput.account_email || '' %>" 
      required 
    >
  
    <!-- Password Input Field -->
    <label for="account_password">Password:</label>
    <input 
      type="password" 
      id="account_password" 
      name="account_password" 
      value="<%= oldInput.account_password || '' %>" 
      required minlength="12"
      pattern="(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*]).{12,}"
      title="Password must be at least 12 characters long and contain at least one capital letter, one number, and one special character.">

    
  
    <!-- Display errors -->
    <% if (errors && errors.length > 0) { %>
        <ul class="notice">
            <% errors.forEach(error => { %>
                <li><%= error %></li>  <!-- Accessing the error directly -->
            <% }) %>
        </ul>
    <% } %>
  
    <button type="submit">Register</button>
  </form>
</div>

</body>
</html>
